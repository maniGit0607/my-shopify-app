name = "my-shopify-app-backend"
main = "src/index.ts"
compatibility_date = "2024-11-10"

# KV namespace for storing shop access tokens
[[kv_namespaces]]
binding = "SHOP_TOKENS"
id = "8e9d532191f5496ca9594a28fc6882bc"

# D1 database for analytics metrics
[[d1_databases]]
binding = "ANALYTICS_DB"
database_name = "shopify-analytics"
database_id = "your-d1-database-id"  # Run: wrangler d1 create shopify-analytics

# Environment variables (set these with: wrangler secret put VARIABLE_NAME)
[vars]
SHOPIFY_API_KEY = "${SHOPIFY_API_KEY}"
SHOPIFY_SCOPES = "read_orders,read_products"
APP_URL = "http://localhost:8787"  # For OAuth callback (update with cloudflared/production URL)
FRONTEND_URL = "http://localhost:5173"  # Frontend URL for OAuth redirects

# Secrets (use: wrangler secret put SHOPIFY_API_SECRET)
SHOPIFY_API_SECRET = "${SHOPIFY_API_SECRET}"